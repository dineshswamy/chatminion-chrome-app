// Generated by CoffeeScript 1.6.1
(function() {
  var dissectRecievedMessage;

  window.base_url = "http://localhost:3000";

  window.user_to_send = null;

  window.message_to_send = null;

  window.messages_with_options = [];

  chrome.browserAction.onClicked.addListener(function(tab) {
    return chrome.windows.create({
      url: '../popup.html',
      type: "popup",
      width: 300,
      height: 600
    }, null);
  });

  window.sendMessage = function() {
    var data;
    data = {
      "sender": user_to_send.id,
      "channel_id": user_to_send.channel_id,
      "message": message_to_send.user_message
    };
    return $.post(base_url + "/calltheteam/sendmessage", data, null);
  };

  window.notificationandTTS = function(notification_title, notification_message) {
    var notification;
    notification = webkitNotifications.createNotification(null, notification_title, notification_message);
    return notification.show();
  };

  chrome.pushMessaging.onMessage.addListener(dissectRecievedMessage);

  window.getTransformedMessage = function() {
    var message_transform_helper, transform_pattern;
    message_transform_helper = new MessageTransformation();
    transform_pattern = "@@1 is looking for you @@2 . @@1 he is always available @@3 . okay @@4 shut up";
    message_transform_helper.init(transform_pattern, "dinesh", "ganesh", "barath", "kumar", "could be replaced");
    message_transform_helper.applyTransformation();
    return notificationandTTS("Dinesh", message_transform_helper.getMessage());
  };

  dissectRecievedMessage = function(message) {
    var messages;
    window.message_to_send = findUserById(message.sender_id);
    messages = new Messages();
    return messages.init();
  };

}).call(this);
